{"version":3,"sources":["webpack:///./frontend/js/hook/index.js","webpack:///./frontend/js/hook/game.js","webpack:///./frontend/js/hook/element.js"],"names":[],"mappings":";;;;;AAAA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;;;AAIA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;;;;;AAKA;AACA;AACA,IAAG;;AAEH;;AAEA,IAAG;;AAEH;;AAEA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,iCAAgC;AAChC;AACA;;AAEA;AACA;AACA;AACA,EAAC,uJ;;;;;;;ACtID;AACA;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA,IAAG;AACH;;;;;AAKA;;AAEA,4B;;;;;;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;;AAGA,kC","file":"2.bundle.js","sourcesContent":["var Game = require('js/hook/game').Game;\r\nvar Element = require('js/hook/element').Element;\r\n\r\ndefine(function() {\r\n  console.log(\"hook.js loaded\");\r\n  var chat = io.connect(window.location.origin+'/hook');\r\n  var cv;\r\n  var ctx;\r\n  var w, h;\r\n  var loop;\r\n  var i = 0;\r\n\r\n  var game = new Game();\r\n  var box1 = new Element(40, 200, 200, 50, 'box1');\r\n  var box2 = new Element(30, 200, 20, 140, 'box1');\r\n  game.add(box1);\r\n  game.add(box2);\r\n\r\n\r\n  function prepare() {\r\n    if (!cv) {\r\n      cv = document.createElement('canvas');\r\n      setTimeout(march, 0);\r\n      setTimeout(fpsMetr, 1000);\r\n      cv.addEventListener('mousedown', canvasClick);\r\n    }\r\n    document.getElementById('hook-canvas-container').appendChild(cv);\r\n    repaint();\r\n    console.log('Context prepared');\r\n  }\r\n\r\n  function canvasClick(e) {\r\n    var rect = cv.getBoundingClientRect();\r\n    game.click(Math.floor(e.x - rect.left)+1, Math.floor(e.y - rect.top)+1);\r\n\r\n  }\r\n\r\n  function repaint() {\r\n    //cv = document.getElementById('hook-cv');\r\n    var parentSize = cv.parentNode.getBoundingClientRect();\r\n    cv.width = w = parentSize.width;\r\n    var pageHeight = document.documentElement.clientHeight - 200;\r\n    cv.height = h =  w < pageHeight ? w : pageHeight;\r\n    ctx = cv.getContext('2d');\r\n    ctx.fillStyle = \"#F0F0F0\";\r\n    ctx.fillRect(0, 0, w, h);\r\n  }\r\n\r\n  window.onresize = repaint;\r\n\r\n  var lastFrameCnt = 0;\r\n  var lastFrameTime = Date.now();\r\n  function fpsMetr() {\r\n    var now = Date.now();\r\n    console.log(Math.floor((i - lastFrameCnt) / (now - lastFrameTime) * 1000));\r\n    lastFrameCnt = i;\r\n    lastFrameTime = now;\r\n    setTimeout(fpsMetr, 1000);\r\n  }\r\n\r\n  var lastX = 0, lastY = 0;\r\n  function march() {\r\n    i++;\r\n    cv.width = cv.width;\r\n    draw();\r\n    setTimeout(march, 0);\r\n  }\r\n\r\n  function draw() {\r\n    //ctx.fillStyle = \"#999999\";\r\n    //ctx.fillRect(0, 0, w, h);\r\n\r\n\r\n    box1.x = 300 + Math.floor(100*Math.sin(i/100));\r\n    box1.y = 300 + Math.floor(100*Math.cos(i/100));\r\n\r\n\r\n\r\n    box2.x = 100 + Math.floor(140*Math.sin(i/100+7));\r\n    box2.y = 200 + Math.floor(100*Math.cos(i/100));\r\n    game.draw(ctx);\r\n    //console.log(box1.x);\r\n\r\n    /*cv.width = w;\r\n    lastX = rX;\r\n    lastY = rY;\r\n    var rX = Math.floor(Math.random() * w);\r\n    var rY = Math.floor(Math.random() * h);\r\n    ctx.moveTo(lastX, lastY);\r\n    ctx.lineTo(rX, rY);\r\n    ctx.lineTo(rX-50, rY);\r\n    ctx.lineTo(rX, rY-50);\r\n    ctx.lineTo(rX-50, rY-50);\r\n    ctx.stroke();*/\r\n  }\r\n\r\n\r\n\r\n\r\n  chat.on('news', function (text) {\r\n    printMessage('Server', text);\r\n  });\r\n\r\n  chat.on('join', function (username) {\r\n\r\n  });\r\n\r\n  chat.on('leave', function (username) {\r\n\r\n  });\r\n\r\n  chat.on('message', function (sender, text) {\r\n    printMessage(sender, text);\r\n  });\r\n\r\n  function eventSendButtonClick() {\r\n    var text = input.value;\r\n    chat.emit('message', text, function() {\r\n      console.log(text);\r\n      printMessage('You', text);\r\n    });\r\n    input.value = \"\";\r\n  }\r\n\r\n  function printMessage(username, text) {\r\n    /*var row = document.createElement('div');\r\n    row.innerHTML = '<b>'+username+'</b>: ' + text;\r\n    messageLog.appendChild(row);*/\r\n    console.log('<b>'+username+'</b>: ' + text);\r\n  }\r\n\r\n  return {\r\n    prepare: prepare\r\n  };\r\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/js/hook/index.js\n ** module id = 32\n ** module chunks = 2\n **/","function Game() {\r\n  this.condition = 'menu';\r\n  this.elements = [];\r\n}\r\n\r\n\r\n\r\nGame.prototype.add = function(element) {\r\n  this.elements.push(element);\r\n};\r\n\r\nGame.prototype.click = function(x, y) {\r\n  console.log(x+' '+y);\r\n  this.elements.forEach(function(el) {\r\n    if (el.inCoords(x, y))\r\n      el.click();\r\n  });\r\n};\r\n\r\nGame.prototype.draw = function(ctx) {\r\n  this.elements.forEach(function(el) {\r\n    el.draw(ctx);\r\n  });\r\n};\r\n\r\n\r\n\r\n\r\nconsole.log('Game loaded');\r\n\r\nmodule.exports.Game = Game;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/js/hook/game.js\n ** module id = 33\n ** module chunks = 2\n **/","function Element(x, y, w, h, name) {\r\n  this.x = x;\r\n  this.y = y;\r\n  this.w = w;\r\n  this.h = h;\r\n  //this.x1 = x + w;\r\n  //this.y1 = y + h;\r\n  this.name = name;\r\n}\r\n\r\nElement.prototype.click = function () {\r\n  console.log('Click: ' + this.name);\r\n};\r\n\r\nElement.prototype.draw = function (ctx) {\r\n  ctx.strokeRect(this.x, this.y, this.w, this.h);\r\n};\r\n\r\nElement.prototype.ecex = function (k) {\r\n\r\n};\r\n\r\nElement.prototype.inCoords = function (x, y) {\r\n  return (x >= this.x && y >= this.y && x <= this.x + this.w && y <= this.y + this.h);\r\n};\r\n\r\n\r\nmodule.exports.Element = Element;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/js/hook/element.js\n ** module id = 34\n ** module chunks = 2\n **/"],"sourceRoot":""}