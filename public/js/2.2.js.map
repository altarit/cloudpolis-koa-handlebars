{"version":3,"sources":["webpack:///./frontend/js/hook/index.js","webpack:///./frontend/js/hook/game.js","webpack:///./frontend/js/hook/element.js","webpack:///./frontend/js/hook/menu.js","webpack:///./frontend/js/hook/fps.js"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;AAKA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH,IAAG;AACH;AACA;AACA,IAAG;AACH,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH,IAAG;AACH;AACA;AACA,IAAG;AACH,IAAG;AACH;AACA;AACA,IAAG;AACH,IAAG;AACH;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA;AACA,kC;;;;;;;AC3IA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA,IAAG;AACH,GAAE;;;;;AAKF;AACA,4B;;;;;;;ACvDA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;;;;;;;;;AC7CA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uCAAsC,OAAO;AAC7C;AACA;AACA;AACA;AACA;;;AAGA,kCAAiC,qCAAqC;;;AAGtE;AACA;AACA,uCAAsC,OAAO;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;;AAEA;;AAEA;;;AAGA;;;;AAIA;;AAEA;;;;;;;;;;ACzDA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,0B","file":"2.2.js","sourcesContent":["var Game = require('js/hook/game').Game;\r\nvar Element = require('js/hook/element').Element;\r\nvar Menu = require('js/hook/menu').Menu;\r\nvar Fps = require('js/hook/fps').Fps;\r\n\r\n\r\nvar fps = new Fps();\r\nvar game = new Game();\r\n\r\n//var chat = io.connect(window.location.origin+'/hook');\r\nvar cv;\r\nvar vars = {\r\n  w: 0,\r\n  h: 0\r\n};\r\nvar ctx;\r\nvar loop;\r\nvar frame = 0;\r\n\r\n\r\nfunction prepare() {\r\n  if (!cv) {\r\n    cv = document.createElement('canvas');\r\n    setTimeout(march, 0);\r\n    cv.addEventListener('mousedown', canvasClick);\r\n  }\r\n  document.getElementById('hook-canvas-container').appendChild(cv);\r\n  repaint();\r\n  console.log('Context prepared');\r\n}\r\n\r\nfunction canvasClick(e) {\r\n  var rect = cv.getBoundingClientRect();\r\n  game.click(Math.floor(e.x - rect.left)+1, Math.floor(e.y - rect.top)+1);\r\n  e.preventDefault();\r\n}\r\n\r\nfunction repaint() {\r\n  //cv = document.getElementById('hook-cv');\r\n  var parentSize = cv.parentNode.getBoundingClientRect();\r\n  cv.width = vars.w = parentSize.width;\r\n  var pageHeight = document.documentElement.clientHeight - 200;\r\n  cv.height = vars.h =  vars.w < pageHeight ? vars.w : pageHeight;\r\n\r\n\r\n  ctx = cv.getContext('2d');\r\n  ctx.fillStyle = \"#F0F0F0\";\r\n  ctx.fillRect(0, 0, vars.w, vars.h);\r\n  game.resize(vars.w, vars.h);\r\n}\r\n\r\nwindow.onresize = repaint;\r\n\r\n\r\n\r\nfunction march() {\r\n  frame++;\r\n  cv.width = cv.width;\r\n  if (!(frame % 100)) fps.update(frame);\r\n  draw();\r\n  window.requestAnimationFrame(march);\r\n}\r\n\r\nfunction draw() {\r\n  ctx.fillText(''+fps.value, vars.w-20, vars.h-10, 20);\r\n  game.draw(ctx);\r\n}\r\n\r\n\r\n\r\n\r\nvar mainMenuList = [\r\n  { title: 'Play online',\r\n    click: function() {\r\n      //game.activate('Searching online game');\r\n    }\r\n  },\r\n  { title: 'Play vs AI',\r\n    click: function() {\r\n    }\r\n  },\r\n  { title: 'Create lobbi',\r\n    click: function() {\r\n      game.activate('Creating lobbi');\r\n    }\r\n  },\r\n  { title: 'Join lobbi',\r\n    click: function () {\r\n      game.activate('Joining lobbi');\r\n    }\r\n  },\r\n  { title: 'Settings',\r\n    click: function () {\r\n      game.activate('Settings');\r\n    }\r\n  }\r\n];\r\n\r\nvar settingMenuList = [\r\n  { title: 'Audio',\r\n    click: function() {\r\n      //game.activate('Searching online game');\r\n    }\r\n  },\r\n  { title: 'Video',\r\n    click: function() {\r\n    }\r\n  },\r\n  { title: 'Game',\r\n    click: function() {\r\n    }\r\n  },\r\n  { title: 'Back',\r\n    click: function () {\r\n      game.activate('Main menu');\r\n    }\r\n  }\r\n];\r\n\r\n\r\nvar mainMenu = new Menu('Main menu', mainMenuList);\r\ngame.add('Main menu', mainMenu);\r\n\r\nvar settingMenu = new Menu('Settings', settingMenuList);\r\ngame.add('Settings', settingMenu);\r\n\r\n/*var box1 = new Element(40, 200, 200, 50, 'box1');\r\n var box2 = new Element(30, 200, 20, 140, 'box2');\r\n var mainMenu = new Menu(10, 10, 200, 600, 'Main menu');\r\n game.add(box1);\r\n game.add(box2);\r\n game.add(mainMenu);\r\n var innerBox = new Element(10, 10, 180, 60, 'Play');\r\n\r\n\r\n */\r\n\r\n\r\nconsole.log(\"hook.js loaded\");\r\nmodule.exports.prepare = prepare;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/js/hook/index.js\n ** module id = 32\n ** module chunks = 2\n **/","function Game() {\r\n  this.condition = 'menu';\r\n  this.forms = {};\r\n  this.active = null;\r\n  this.width = 0;\r\n  this.height = 0;\r\n}\r\n\r\nGame.prototype.resize = function(w, h) {\r\n  this.active.resize(w, h);\r\n  this.width = w;\r\n  this.height = h;\r\n};\r\n\r\nGame.prototype.add = function(name, form) {\r\n  form.parent = this;\r\n  this.forms[name] = form;\r\n  if (!this.active)\r\n    this.active = form;\r\n  this.active.resize(this.width, this.height);\r\n};\r\n\r\nGame.prototype.activate = function(name) {\r\n  var form = this.forms[name];\r\n  if (!form) throw new Error('Form ' + name  + ' not found');\r\n  this.active = form;\r\n  this.active.resize(this.width, this.height);\r\n};\r\n\r\nGame.prototype.click = function(x, y) {\r\n  this.active.click(x, y);\r\n};\r\n\r\nGame.prototype.draw = function(ctx) {\r\n  this.active.draw(ctx);\r\n};\r\n\r\n/*Game.prototype.click = function(x, y) {\r\n  console.log(x+' '+y);\r\n  this.elements.forEach(function(el) {\r\n    if (el.inCoords(x, y))\r\n      el.click(x-el.x, y - el.y);\r\n  });\r\n};\r\n\r\nGame.prototype.draw = function(ctx) {\r\n  this.elements.forEach(function(el) {\r\n    el.draw(ctx, 0, 0);\r\n  });\r\n};*/\r\n\r\n\r\n\r\n\r\nconsole.log('game.js loaded');\r\nmodule.exports.Game = Game;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/js/hook/game.js\n ** module id = 33\n ** module chunks = 2\n **/","function Element(x, y, w, h, name) {\r\n  this.x = x;\r\n  this.y = y;\r\n  this.w = w;\r\n  this.h = h;\r\n  this.name = name;\r\n\r\n  this.parent = null;\r\n  this.elements = [];\r\n}\r\n\r\nElement.prototype.add = function(element) {\r\n  element.parent = this;\r\n  this.elements.push(element);\r\n};\r\n\r\nElement.prototype.click = function (x, y) {\r\n  console.log('Click: ' + this.name);\r\n  this.elements.forEach(function(el) {\r\n    if (el.inCoords(x, y))\r\n      el.click(x-el.x, y - el.y);\r\n  });\r\n};\r\n\r\nElement.prototype.draw = function (ctx, offsetX, offsetY) {\r\n  if (!this.parent)\r\n    return;\r\n  var realX = this.x + offsetX;\r\n  var realY = this.y + offsetY;\r\n  ctx.strokeRect(realX, realY, this.w, this.h);\r\n  this.elements.forEach(function(el) {\r\n    el.draw(ctx, realX, realY);\r\n  });\r\n};\r\n\r\nElement.prototype.ecex = function (k) {\r\n\r\n};\r\n\r\nElement.prototype.inCoords = function (x, y) {\r\n  return (x >= this.x && y >= this.y && x <= this.x + this.w && y <= this.y + this.h);\r\n};\r\n\r\n//Element.prototype.name='Element';\r\n\r\nmodule.exports.Element = Element;\r\n\r\n\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/js/hook/element.js\n ** module id = 34\n ** module chunks = 2\n **/","var Element = require('js/hook/element').Element;\r\n\r\nMenu.rowHeight = 40;\r\nMenu.left = 20;\r\n\r\nfunction Menu(name, menuList) {\r\n  this.name = name;\r\n  this.list = menuList;\r\n  this.parent = null;\r\n  this.rowHeight = Menu.rowHeight;\r\n}\r\n\r\nMenu.prototype.resize = function (w, h) {\r\n  var startY = Math.floor((h - this.list.length * this.rowHeight)/2);\r\n  var self = this;\r\n  for(var i=0, len = this.list.length; i<len; i++) {\r\n    var el = this.list[i];\r\n    el.left = Menu.left;\r\n    el.top = startY + i * self.rowHeight;\r\n  };\r\n};\r\n\r\n\r\nMenu.prototype.add = function() { throw new Error('Doesn\\'t support'); };\r\n\r\n\r\nMenu.prototype.click = function (x, y) {\r\n  //console.log('Click: ' + this.name);\r\n  for(var i=0, len = this.list.length; i<len; i++) {\r\n    var el = this.list[i];\r\n    if (y > el.top - this.rowHeight/2 && y<el.top + this.rowHeight/2) {\r\n      console.log(el.title);\r\n      el.click();\r\n    }\r\n  };\r\n};\r\n\r\nMenu.prototype.draw = function (ctx) {\r\n  if (!this.parent)\r\n    console.log(this.name + ' has no parent');\r\n\r\n  this.list.forEach(function(el) {\r\n    ctx.fillText(el.title, el.left, el.top);\r\n  });\r\n};\r\n\r\nMenu.prototype.ecex = function (k) {\r\n\r\n};\r\n\r\n\r\n//Element.prototype.name='Element';\r\n\r\n\r\n\r\nMenu.prototype.__proto__ = Element.prototype;\r\n\r\nmodule.exports.Menu = Menu;\r\n\r\n\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/js/hook/menu.js\n ** module id = 35\n ** module chunks = 2\n **/","function Fps() {\r\n  this.value = 0;\r\n  this.lastFrame = Date.now();\r\n  this.prevIteration = 0;\r\n}\r\n\r\nFps.prototype.update = function (i) {\r\n  var now = Date.now();\r\n  this.value = Math.floor((i - this.prevIteration) / (now - this.lastFrame) * 1000);\r\n  this.lastFrame = now;\r\n  this.prevIteration = i;\r\n  return this.value;\r\n};\r\n\r\nFps.prototype.name = 'Fps';\r\n\r\nmodule.exports.Fps = Fps;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/js/hook/fps.js\n ** module id = 36\n ** module chunks = 2\n **/"],"sourceRoot":""}